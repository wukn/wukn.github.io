<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>[译][Python3] 函数</title>

  
  





  
  <meta name="author" content="wukn" />
  <meta name="description" content=" Python3 函数。
 
" />

  
  
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@gohugoio" />
    <meta name="twitter:title" content="[译][Python3] 函数" />
    <meta name="twitter:description" content=" Python3 函数。
 
" />
    <meta name="twitter:image" content="https://wukn.github.io/img/avatar.jpg" />
  

  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="[译][Python3] 函数" />
  <meta property="og:description" content=" Python3 函数。
 
" />
  <meta property="og:url" content="https://wukn.github.io/2017/03/15/python3-functions/" />
  <meta property="og:image" content="https://wukn.github.io/img/avatar.jpg" />




<meta name="generator" content="Hugo 0.37.1" />


<link rel="canonical" href="https://wukn.github.io/2017/03/15/python3-functions/" />
<link rel="alternative" href="https://wukn.github.io/index.xml" title="wukn blog" type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />







<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="wukn blog" />
<meta name="msapplication-tooltip" content="wukn blog" />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="https://wukn.github.io/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="https://wukn.github.io/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://wukn.github.io/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="https://wukn.github.io/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="https://wukn.github.io/img/touch-icon-apple.png" />
<link rel="mask-icon" href="https://wukn.github.io/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="https://wukn.github.io/css/bundle.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://wukn.github.io/img/avatar.jpg" alt="Avatar">
  
  <h2 class="title">wukn blog</h2>
  
  <p class="subtitle">~ Stay Hungry, Stay Foolish ~</p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            
              is-active
            ">
            <a href="https://wukn.github.io/">Home</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://github.com/wukn">Works</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://wukn.github.io/tags">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://wukn.github.io/about/">About</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      

      
      <li class="social-item">
        <a href="//github.com/wukn" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="https://wukn.github.io/img/wechat_qrcode.png" title="Wechat"><span class="icon icon-wechat"></span></a>
      </li>

      

      

      

      

      <li class="social-item">
        <a href="https://wukn.github.io/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">[译][Python3] 函数</h1>
      <p class="post-meta">@wukn · Mar 15, 2017 · 4 min read</p>
    </header>
    <article class="post-content"><blockquote>
<p>Python3 函数。</p>
</blockquote>

<p></p>

<h3 id="定义函数">定义函数</h3>

<p>函数是一个可调用的对象，它接收0个或多个参数，然后执行一段代码，最后返回一个值给调用者。</p>

<p>在python中函数是first-class object。因此它具有与其他Python对象完全相同的基本行为特征，如可以被传递、可以作为右值进行赋值、可以作为另一个函数的参数或返回值等。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>    <span class="c1"># write Fibonacci series up to n</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;Print a Fibonacci series up to n.&#34;&#34;&#34;</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
    <span class="k">print</span><span class="p">()</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span> <span class="mi">144</span> <span class="mi">233</span> <span class="mi">377</span> <span class="mi">610</span> <span class="mi">987</span> <span class="mi">1597</span></code></pre></div>
<p>关键字def用于定义函数。其后必须跟有函数名称和以括号标明的形式参数（formal parameter）列表。函数体语句从下一行开始，且必须缩进。</p>

<p>函数体的第一行可以是一个可选的字符串文本；该字符串是函数的文档字符串（docstring）。</p>

<p>函数执行时会引入一个新的符号表，用于保存函数的局部变量。更确切地说，函数中的所有的赋值都是将值存储在局部符号表；而变量引用首先查找局部符号表，然后是上层函数的局部符号表，然后是全局符号表，最后是内置名字表。因此，在函数内部虽然可以引用全局变量，但是却不能直接给它们赋值（除非用global语句命名）。</p>

<p>被调函数的实际参数是在被调用时从其局部符号表中引入的；因此，参数的传递使用传值调用（这里的值始终是对象的引用，不是指对象的值）。事实上，按对象引用传递可能是更恰当的说法，因为如果传递了一个可变对象，调用函数将看到任何被调用函数对该可变对象做出的改变（比如添加到列表中的元素）。</p>

<p>函数定义会在当前符号表内引入函数名。函数名对应的值的类型是解释器可识别的用户自定义函数。此值可以分配给另一个名称，然后该名称也可作为函数。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span>
<span class="o">&lt;</span><span class="n">function</span> <span class="n">fib</span> <span class="n">at</span> <span class="mi">10042</span><span class="n">ed0</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">fib</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">5</span> <span class="mi">8</span> <span class="mi">13</span> <span class="mi">21</span> <span class="mi">34</span> <span class="mi">55</span> <span class="mi">89</span></code></pre></div>
<p>没有return语句的函数也会返回一个值，这个值为None。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">fib</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="bp">None</span></code></pre></div>
<p>将函数改成返回Fibonacci数列列表：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">fib2</span><span class="p">(</span><span class="n">n</span><span class="p">):</span> <span class="c1"># return Fibonacci series up to n</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;Return a list containing the Fibonacci series up to n.&#34;&#34;&#34;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>    <span class="c1"># see below</span>
        <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
    <span class="k">return</span> <span class="n">result</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">f100</span> <span class="o">=</span> <span class="n">fib2</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>    <span class="c1"># call it</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f100</span>                <span class="c1"># write the result</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">89</span><span class="p">]</span></code></pre></div>
<h3 id="参数默认值">参数默认值</h3>

<p>创建函数时，可以指定一个或多个参数的默认值。这样的函数被调用时，可以省略带有默认值的参数。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">ask_ok</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">retries</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">complaint</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;Yes or no, please!&#39;</span><span class="p">):</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ok</span> <span class="ow">in</span> <span class="p">(</span><span class="sa"></span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;ye&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;yes&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">ok</span> <span class="ow">in</span> <span class="p">(</span><span class="sa"></span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;nop&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;nope&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="n">retries</span> <span class="o">=</span> <span class="n">retries</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">retries</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;uncooperative user&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">complaint</span><span class="p">)</span></code></pre></div>
<p>这个函数可以有几种调用方式：
* 只给出强制参数：<code>ask_ok(' Do you really want to quit?')</code>
* 给出一个可选的参数：<code>ask_ok('OK to overwrite the file?', 2)</code>
* 给出所有的参数：<code>ask_ok('OK to overwrite the file?', 2, 'Come on, only yes or no!')</code></p>

<p>上面的代码中还使用了in关键字，它用于测试一个序列是否包含特定的值。</p>

<p>参数的默认值是在函数的定义阶段计算的，因此：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">i</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">arg</span><span class="o">=</span><span class="n">i</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">f</span><span class="p">()</span>

<span class="c1"># will output：</span>
<span class="c1"># 5</span></code></pre></div>
<p>注意，参数的默认值只计算一次，但是当默认值是可变对象时又不一样，例如列表、字典或大部分类的实例。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="p">[]):</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span>

<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>

<span class="c1"># will output:</span>
<span class="c1"># [1]</span>
<span class="c1"># [1, 2]</span>
<span class="c1"># [1, 2, 3]</span></code></pre></div>
<p>如果不希望默认值在随后的调用中共享，可以这样做：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">L</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">L</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">L</span></code></pre></div>
<h3 id="关键字参数">关键字参数</h3>

<p>使用位置参数（positional argument）调用函数时，实参根据顺序和形参对应。</p>

<p>除了位置参数，函数也可以通过<code>kwarg = value</code>这样关键字参数（keyword argument）的形式调用。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;a stiff&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;voom&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;Norwegian Blue&#39;</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- This parrot wouldn&#39;t&#34;</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39; &#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;if you put&#34;</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;volts through it.&#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- Lovely plumage, the&#34;</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- It&#39;s&#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;!&#34;</span><span class="p">)</span></code></pre></div>
<p>上面的函数接受一个必选参数和三个可选参数。我们可以这样调用它：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">parrot</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>                                          <span class="c1"># 1 positional argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>                                  <span class="c1"># 1 keyword argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o">=</span><span class="mi">1000000</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;VOOOOOM&#39;</span><span class="p">)</span>             <span class="c1"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;VOOOOOM&#39;</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mi">1000000</span><span class="p">)</span>             <span class="c1"># 2 keyword arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;a million&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;bereft of life&#39;</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;jump&#39;</span><span class="p">)</span>         <span class="c1"># 3 positional arguments</span>
<span class="n">parrot</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;a thousand&#39;</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;pushing up the daisies&#39;</span><span class="p">)</span>  <span class="c1"># 1 positional, 1 keyword</span></code></pre></div>
<p>但不能这样调用：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">parrot</span><span class="p">()</span>                     <span class="c1"># required argument missing</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;dead&#39;</span><span class="p">)</span>  <span class="c1"># non-keyword argument after a keyword argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="mi">110</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mi">220</span><span class="p">)</span>     <span class="c1"># duplicate value for the same argument</span>
<span class="n">parrot</span><span class="p">(</span><span class="n">actor</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;John Cleese&#39;</span><span class="p">)</span>  <span class="c1"># unknown keyword argument</span></code></pre></div>
<p>在调用函数时，关键字参数必须在位置参数后面，关键字参数名必须和函数的某个参数匹配，他们的顺序并不重要。任何参数都不能多次赋值。</p>

<p>如果最后一个参数以<code>**name</code>的形式出现，那么它可以接收一个字典。该字典包含了所有未出现在形式参数列表中的关键字参数。它还可能与<code>*name</code>这样的形参结合使用。<code>*name</code>接收一个元组，该元组包含了所有未出现在形参列表中的位置参数。<code>*name</code>必须出现在<code>**name</code>之前。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">cheeseshop</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="o">*</span><span class="n">arguments</span><span class="p">,</span> <span class="o">**</span><span class="n">keywords</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- Do you have any&#34;</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;?&#34;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- I&#39;m sorry, we&#39;re all out of&#34;</span><span class="p">,</span> <span class="n">kind</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">arguments</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-&#34;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keywords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">kw</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;:&#34;</span><span class="p">,</span> <span class="n">keywords</span><span class="p">[</span><span class="n">kw</span><span class="p">])</span></code></pre></div>
<p>它可以这样被调用：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">cheeseshop</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Limburger&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;It&#39;s very runny, sir.&#34;</span><span class="p">,</span>
           <span class="sa"></span><span class="s2">&#34;It&#39;s really very, VERY runny, sir.&#34;</span><span class="p">,</span>
           <span class="n">shopkeeper</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;Michael Palin&#34;</span><span class="p">,</span>
           <span class="n">client</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;John Cleese&#34;</span><span class="p">,</span>
           <span class="n">sketch</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;Cheese Shop Sketch&#34;</span><span class="p">)</span></code></pre></div>
<p>输出的结果为：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">--</span> <span class="n">Do</span> <span class="n">you</span> <span class="n">have</span> <span class="nb">any</span> <span class="n">Limburger</span> <span class="err">?</span>
<span class="o">--</span> <span class="n">I</span><span class="sa"></span><span class="s1">&#39;m sorry, we&#39;</span><span class="n">re</span> <span class="nb">all</span> <span class="n">out</span> <span class="n">of</span> <span class="n">Limburger</span>
<span class="n">It</span><span class="sa"></span><span class="s1">&#39;s very runny, sir.</span><span class="err">
</span><span class="err"></span><span class="s1">It&#39;</span><span class="n">s</span> <span class="n">really</span> <span class="n">very</span><span class="p">,</span> <span class="n">VERY</span> <span class="n">runny</span><span class="p">,</span> <span class="n">sir</span><span class="o">.</span>
<span class="o">----------------------------------------</span>
<span class="n">client</span> <span class="p">:</span> <span class="n">John</span> <span class="n">Cleese</span>
<span class="n">shopkeeper</span> <span class="p">:</span> <span class="n">Michael</span> <span class="n">Palin</span>
<span class="n">sketch</span> <span class="p">:</span> <span class="n">Cheese</span> <span class="n">Shop</span> <span class="n">Sketch</span></code></pre></div>
<h3 id="任意参数列表">任意参数列表</h3>

<p>还有一种不太常见的场景是使用可变数量的参数调用函数。这些参数将会被放到一个元组中。在可变数量参数之前，可以有零个或多个普通的参数。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">write_multiple_items</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">separator</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="nb">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">))</span></code></pre></div>
<p>通常可变数量参数位于形参列表的最后，因为它会收集传递过来的所有剩余的输入参数。出现在<code>*args</code>参数后面的任何形参只能作为关键字参数。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">concat</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;/&#34;</span><span class="p">):</span>
<span class="o">...</span>    <span class="k">return</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">concat</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;earth&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;mars&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;venus&#34;</span><span class="p">)</span>
<span class="sa"></span><span class="s1">&#39;earth/mars/venus&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">concat</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;earth&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;mars&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;venus&#34;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;.&#34;</span><span class="p">)</span>
<span class="sa"></span><span class="s1">&#39;earth.mars.venus&#39;</span></code></pre></div>
<h3 id="参数列表解包">参数列表解包</h3>

<p>如果传递的参数已经是一个列表或元组，那么我们将它解包，拆分成独立的位置参数。例如，<code>range()</code>函数期望两个单独的参数start和stop，如果它们不是独立的（放在一个列表或元组中），那么函数调用时得使用<code>*</code>操作符将参数从列表或元组中分拆开来：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>            <span class="c1"># normal call with separate arguments</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">))</span>            <span class="c1"># call with arguments unpacked from a list</span>
<span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span></code></pre></div>
<p>同样，可以使用<code>**</code>操作符让字典传递关键字参数：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">parrot</span><span class="p">(</span><span class="n">voltage</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;a stiff&#39;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39;voom&#39;</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;-- This parrot wouldn&#39;t&#34;</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;if you put&#34;</span><span class="p">,</span> <span class="n">voltage</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;volts through it.&#34;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sa"></span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;E&#39;s&#34;</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;!&#34;</span><span class="p">)</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="sa"></span><span class="s2">&#34;voltage&#34;</span><span class="p">:</span> <span class="sa"></span><span class="s2">&#34;four million&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;state&#34;</span><span class="p">:</span> <span class="sa"></span><span class="s2">&#34;bleedin&#39; demised&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;action&#34;</span><span class="p">:</span> <span class="sa"></span><span class="s2">&#34;VOOM&#34;</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">parrot</span><span class="p">(</span><span class="o">**</span><span class="n">d</span><span class="p">)</span>
<span class="o">--</span> <span class="n">This</span> <span class="n">parrot</span> <span class="n">wouldn</span><span class="sa"></span><span class="s1">&#39;t VOOM if you put four million volts through it. E&#39;</span><span class="n">s</span> <span class="n">bleedin</span><span class="sa"></span><span class="s1">&#39; demised !</span></code></pre></div>
<h3 id="lambda表达式">lambda表达式</h3>

<p>可以使用lambda关键字创建匿名函数。在语法上，它们被限制只能有一个单独的表达式。在语义上，他们只是普通函数定义的语法糖。就像嵌套的函数定义，lambda函数可以从它被包含的作用域中引用变量：</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">make_incrementor</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">return</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">make_incrementor</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="mi">42</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="mi">43</span></code></pre></div>
<p>上面的代码中是使用lambda表达式返回一个函数。另一种用法是将一个函数作为参数传递。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;one&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;two&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;three&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;four&#39;</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">pair</span><span class="p">:</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pairs</span>
<span class="p">[(</span><span class="mi">4</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;four&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;one&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;three&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="sa"></span><span class="s1">&#39;two&#39;</span><span class="p">)]</span></code></pre></div>
<h3 id="文档字符串-docstring">文档字符串（docstring）</h3>

<p>文档字符串用于对对象进行注释。它的格式的惯例为：</p>

<p>第一行永远应该是对象用途的简短、精确的总述。为了简单起见，不需要明确的陈述对象的名字或类型，因为这些信息可以从别的途径了解到。</p>

<p>如果文档字符串中还要有其他描述，那么第二行应该是空白，在视觉上把摘要与剩余的描述分开。接下来应该是对对象的调用约定、 其副作用等的描述。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
<span class="o">...</span>     <span class="sa"></span><span class="s2">&#34;&#34;&#34;Do nothing, but document it.
</span><span class="s2">...
</span><span class="s2">...     No, really, it doesn&#39;t do anything.
</span><span class="s2">...     &#34;&#34;&#34;</span>
<span class="o">...</span>     <span class="k">pass</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">my_function</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
<span class="n">Do</span> <span class="n">nothing</span><span class="p">,</span> <span class="n">but</span> <span class="n">document</span> <span class="n">it</span><span class="o">.</span>

    <span class="n">No</span><span class="p">,</span> <span class="n">really</span><span class="p">,</span> <span class="n">it</span> <span class="n">doesn</span><span class="sa"></span><span class="s1">&#39;t do anything.</span></code></pre></div>
<h3 id="函数注解-function-annotations">函数注解（Function Annotations）</h3>

<p>函数注解是函数的一些元数据信息，用于描述自定义函数中的类型。</p>

<p>注解以字典的形式存储在函数的<strong>annotations</strong>属性中。参数的注释用参数名后的冒号定义,冒号后面紧跟着一个用于计算注释的表达式。回值注释使用<code>-&gt;</code>定义，紧跟着参数列表和def语句的末尾的冒号之间的表达式。</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">ham</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">eggs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;eggs&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Annotations:&#34;</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">__annotations__</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Arguments:&#34;</span><span class="p">,</span> <span class="n">ham</span><span class="p">,</span> <span class="n">eggs</span><span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">ham</span> <span class="o">+</span> <span class="sa"></span><span class="s1">&#39; and &#39;</span> <span class="o">+</span> <span class="n">eggs</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="p">(</span><span class="sa"></span><span class="s1">&#39;spam&#39;</span><span class="p">)</span>
<span class="n">Annotations</span><span class="p">:</span> <span class="p">{</span><span class="sa"></span><span class="s1">&#39;ham&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">str</span><span class="sa"></span><span class="s1">&#39;&gt;, &#39;</span><span class="k">return</span><span class="sa"></span><span class="s1">&#39;: &lt;class &#39;</span><span class="nb">str</span><span class="sa"></span><span class="s1">&#39;&gt;, &#39;</span><span class="n">eggs</span><span class="sa"></span><span class="s1">&#39;: &lt;class &#39;</span><span class="nb">str</span><span class="sa"></span><span class="s1">&#39;&gt;}</span><span class="err">
</span><span class="err"></span><span class="s1">Arguments: spam eggs</span><span class="err">
</span><span class="err"></span><span class="s1">&#39;</span><span class="n">spam</span> <span class="ow">and</span> <span class="n">eggs</span><span class="sa"></span><span class="s1">&#39;</span></code></pre></div>
<h3 id="附-编码风格">（附）编码风格</h3>

<p>PEP 8是大部分Pyhton项目所遵循的风格指南。其要点有：</p>

<ul>
<li>使用4个空格的缩进，不要使用制表符。4个空格是小缩进（允许更深的嵌套）和大缩进（易于阅读）之间很好的折衷。制表符会引起混乱，最好弃用。</li>
<li>每一行以确保不会超过79个字符。这有助于小显示器用户阅读，也可以让大显示器能并排显示几个代码文件。</li>
<li>使用空行分隔函数和类，以及函数内的大块代码。</li>
<li>如果可能，注释独占一行。</li>
<li>使用文档字符串。</li>
<li>运算符周围和逗号后使用空格，但是括号里侧不加空格：<code>a = f(1, 2) + g(3, 4)</code>。</li>
<li>保持类和函数命名的一致性；常见的做法是命名类的时候使用驼峰法，命名函数和方法的时候使用小写字母+下划线法。始终使用self作为第一个方法参数的名称。</li>
<li>尽量只使用Python默认的UTF-8编码。</li>
</ul>

<hr />

<p>参考资料：</p>

<p><a href="https://docs.python.org/3.5/tutorial/controlflow.html#defining-functions">Python3 Documentation - Tutorial</a></p></article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://wukn.github.io/tags/python3"><span class="tag">Python3</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        © Creative Commons Attribution-NonCommercial 4.0 International License.This post was published <strong>375</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.
      </p>
    </footer>
    
      
    
  </section>
  <footer class="site-footer">
  <p>© 2017-2018 wukn blog</p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="https://wukn.github.io/js/bundle.js"></script>


<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-XXXXXXXX-X', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>





  </body>
</html>
