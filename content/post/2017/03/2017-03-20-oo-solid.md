---
author: wukn
catalog: true
date: 2017-03-20T00:00:00Z
tags:
- 设计模式
title: 面向对象的SOILD原则
url: /2017/03/20/oo-solid/
---

> SOLID（单一职责、开放闭合、里氏替换、接口隔离以及依赖倒置）。

> 在程序设计领域， SOLID（单一职责、开放闭合、里氏替换、接口隔离以及依赖倒置）指代了面向对象编程和面向对象设计的五个基本原则。当这些原则一起使用时，它们使得开发的系统易于维护和扩展变成可能。

<!--more-->

### 单一职责原则（Single Responsibility Principle）

核心思想：对象应该具有单一功能职责。

单一职责原则可以看做是低耦合、高内聚在面向对象原则上的引申，将职责定义为引起变化的原因，以提高内聚性来减少引起变化的原因。职责过多，可能引起它变化的原因就越多，这将导致职责依赖，相互之间就产生影响，从而降低了其内聚性，提高了耦合度。通常意义下的单一职责，就是指只有一种单一功能，不要为类实现过多的功能点，以保证实体只有一个引起它变化的原因。


### 开放闭合原则（Open/Closed Principle）

核心思想：对扩展开放，对修改封闭。

对扩展开放，意味着有新的需求或变化时，可以对现有代码进行扩展，以适应新的情况。

对修改封闭，意味着类一旦设计完成，就可以独立完成其工作，而不要对其进行任何尝试的修改。

其实就是对抽象编程，而不对具体编程，因为抽象相对稳定。让类依赖于固定的抽象，所以修改就是封闭的；而通过面向对象的继承和多态机制，又可以实现对抽象类的继承，通过覆写其方法来改变固有行为，实现新的拓展方法，所以就是开放的。

### 里氏替换原则（Liskov Substitution Principle）

核心思想：程序中的对象应该可以在不改变程序正确性的前提下被它的子类所替换。

这是对继承机制的约束规范，只有子类能够替换基类时，才能保证系统在运行期内识别子类，这是保证继承复用的基础。将基类替换为子类，程序的行为不会发生任何变化。同时，这一约束反过来则是不成立的，子类可以替换基类，但是基类不一定能替换子类。

里氏替换原则主要着眼于对抽象和多态建立在继承的基础上，因此只有遵循了Liskov替换原则，才能保证继承复用是可靠地。实现的方法是面向接口编程：将公共部分抽象为基类接口或抽象类，通过提取抽象类，在子类中通过覆写父类的方法实现新的方式支持同样的职责。

里氏替换原则是关于继承机制的设计原则，违反了Liskov替换原则就必然导致违反开放封闭原则。

里氏替换原则能够保证系统具有良好的拓展性，同时实现基于多态的抽象机制，能够减少代码冗余，避免运行期的类型判别。

### 接口隔离原则（Interface Segregation Principle）

核心思想：多个特定接口要好于一个宽泛用途的接口。

提供多个尽可能小的单独接口，而不要提供一个大的总接口。一个类对另外一个类的依赖应该建立在最小的接口上。依赖几个专用的接口要比依赖一个综合的接口更灵活。接口是设计时对外部设定的约定，通过分散定义多个接口，可以预防外来变更的扩散，提高系统的灵活性和可维护性。

### 依赖倒置原则（Dependency Inversion Principle）

核心思想：实现尽量依赖抽象，不依赖具体实现。

高层模块不依赖于底层模块，二者都同依赖于抽象；抽象不依赖于具体，具体依赖于抽象。

类与类、模板与模块之间一定会存在依赖。当两个模块之间存在紧密的耦合关系时，最好的方法就是分离接口和实现：在依赖之间定义一个抽象的接口使得高层模块调用接口，而底层模块实现接口的定义，以此来有效控制耦合关系，达到依赖于抽象的设计目标。

抽象的稳定性决定了系统的稳定性，因为抽象是不变的，依赖于抽象是面向对象设计的精髓，也是依赖倒置原则的核心。

### PS1：迪米特法则（Law Of Demeter）

核心思想：一个软件实体应当尽可能少的与其他实体发生相互作用。

类与类之间的关系越密切，耦合度也就越来越大，只有尽量降低类与类之间的耦合才符合设计模式；对于被依赖的类来说，无论逻辑多复杂都要尽量封装在类的内部；每个对象都会与其他对象有耦合关系，我们称出现成员变量、方法参数、方法返回值中的类为直接的耦合依赖，而出现在局部变量中的类则不是直接耦合依赖，也就是说，不是直接耦合依赖的类最好不要作为局部变量的形式出现在类的内部。

一个对象对另一个对象知道的越少越好，因此迪米特法则也叫最少知识原则。

### PS2：组合/聚合复用原则（Composite/Aggregate Reuse Principle）

核心思想：尽量使用合成/聚合达到复用，尽量少用继承。

在一个新的对象里面通过关联关系（包括组合关系和聚合关系）使用一些已有的对象，使之成为新对象的一部分，新对象通过委派调用已有对象的方法达到复用其已有功能的目的。也就是，要尽量使用类的合成复用，尽量不要使用继承。

---

参考资料：

[Wikipedia - SOLID (object-oriented design)](https://en.wikipedia.org/wiki/SOLID_(object-oriented_design))

[ITEYE - 面向对象的3个基本要素和5个基本设计原则](http://willtea.iteye.com/blog/1704806)

[CSDN - 设计模式之面向对象七大基本原则](http://blog.csdn.net/yanbober/article/details/45312243)
